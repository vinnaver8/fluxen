<!DOCTYPE html>
<html>
<head>
  <title>Ghibli Image Generator</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2em; }
    #result-img { max-width: 80%; margin-top: 1em; }
  </style>
</head>
<body>
  <h1>Ghibli-style Your Image</h1>
  <input type="file" id="imageInput" accept="image/*"><br><br>
  <input type="text" id="promptInput" placeholder="Enter Ghibli prompt" size="40"><br><br>
  <button onclick="sendImage()">Generate</button>

  <h2>Result:</h2>
  <img id="result-img" src="">

  <script>
    async function sendImage() {
      const fileInput = document.getElementById('imageInput');
      const prompt = document.getElementById('promptInput').value;
      if (!fileInput.files[0]) return alert("Please upload an image.");

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result;
        const response = await fetch("https://hook.eu2.make.com/yjfi67vv5c6ff3aqhronjkkbhbyfwqkf", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            image_base64: base64,
            prompt: prompt || "a cozy Ghibli-style room with warm lighting",
            seed: 1234
          })
        });

        const data = await response.json();
        document.getElementById("result-img").src = data.generated_image_url;
      };
      reader.readAsDataURL(fileInput.files[0]);
    }
  </script>
</body>
</html>
